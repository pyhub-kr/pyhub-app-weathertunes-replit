# 🎵 Weather Music - 날씨 기반 음악 스트리밍 서비스

현재 날씨와 시간대에 맞는 K-pop 음악을 자동으로 선곡하여 재생하는 스마트 음악 플랫폼입니다.

## 🌟 주요 기능

### 🌤️ 스마트 날씨 감지
- **실시간 위치 기반 날씨 정보**: GPS를 통한 정확한 위치 감지
- **5분마다 자동 갱신**: 최신 날씨 상태를 지속적으로 반영
- **다양한 날씨 조건 지원**: 맑음, 비, 눈, 흐림, 안개, 뇌우 등

### 🎶 지능형 음악 선곡 시스템
- **500+ K-pop 트랙 데이터베이스**: 엄선된 한국 음악 컬렉션
- **날씨별 맞춤 플레이리스트**: 각 날씨에 적합한 분위기의 음악 자동 선택
- **시간대별 음악 큐레이션**: 새벽, 아침, 오후, 저녁, 밤 등 시간대별 최적화
- **스마트 랜덤 재생**: 가중치 기반 지능형 다음 곡 선택

### ⏰ 시간대 자동 감지
- **15분마다 시간대 변화 감지**: 자동으로 시간 변화를 모니터링
- **플레이리스트 자동 갱신**: 시간대가 바뀌면 적절한 음악으로 자동 전환
- **성능 최적화**: 중복 갱신 방지 및 백그라운드 실행

### 🎮 YouTube 음악 스트리밍
- **YouTube IFrame API 활용**: 고품질 음악 스트리밍
- **숨겨진 플레이어**: 음악에만 집중할 수 있는 오디오 전용 재생
- **Media Session API**: 브라우저 알림창 및 키보드 미디어 키 지원
- **자동 다음 곡 재생**: 사용자 상호작용 후 끊김 없는 연속 재생

### 🎨 동적 시각적 경험
- **Unsplash API 배경**: 날씨와 시간에 맞는 고품질 배경 이미지
- **실시간 그라데이션**: 시간과 날씨에 따른 동적 색상 변화
- **반응형 디자인**: 모든 디바이스에서 최적화된 경험
- **부드러운 애니메이션**: CSS 전환 효과와 호버 인터랙션

### ⌨️ 키보드 단축키
- **스페이스바**: 다음 배경 이미지
- **방향키**: 음량 조절 (↑↓), 배경 전환 (←→)
- **B키**: 배경 변경
- **H키**: 도움말 토글

## 🚀 시작하기

### 필수 요구사항
- Node.js 18+ 
- PostgreSQL 데이터베이스
- OpenWeatherMap API 키
- Unsplash API 키

### 설치 방법

1. **저장소 클론**
```bash
git clone [repository-url]
cd weather-music-app
```

2. **의존성 설치**
```bash
npm install
```

3. **환경 변수 설정**
`.env` 파일을 생성하고 다음 변수들을 설정하세요:
```env
DATABASE_URL=your_postgresql_connection_string
OPENWEATHER_API_KEY=your_openweather_api_key
UNSPLASH_ACCESS_KEY=your_unsplash_access_key
```

4. **데이터베이스 마이그레이션**
```bash
npm run db:migrate
```

5. **개발 서버 실행**
```bash
npm run dev
```

앱이 `http://localhost:5000`에서 실행됩니다.

## 🏗️ 프로젝트 구조

```
weather-music-app/
├── client/                 # React 프론트엔드
│   ├── src/
│   │   ├── components/     # UI 컴포넌트
│   │   ├── hooks/          # React 커스텀 훅
│   │   ├── lib/            # 유틸리티 라이브러리
│   │   └── pages/          # 페이지 컴포넌트
├── server/                 # Express 백엔드
│   ├── db/                 # 데이터베이스 설정
│   └── routes.ts           # API 라우트
├── shared/                 # 공유 타입 및 스키마
└── README.md
```

## 🛠️ 기술 스택

### 프론트엔드
- **React 18**: 최신 React 기능 활용
- **TypeScript**: 타입 안전성 보장
- **Tailwind CSS**: 유틸리티 우선 스타일링
- **TanStack Query**: 서버 상태 관리
- **Wouter**: 경량 라우팅
- **Radix UI**: 접근성 우선 컴포넌트

### 백엔드
- **Express.js**: 웹 서버 프레임워크
- **TypeScript**: 백엔드 타입 안전성
- **Drizzle ORM**: 타입 안전 데이터베이스 쿼리
- **PostgreSQL**: 관계형 데이터베이스

### 외부 API
- **OpenWeatherMap**: 날씨 데이터
- **YouTube IFrame API**: 음악 스트리밍
- **Unsplash API**: 고품질 배경 이미지

## 📱 PWA 기능

- **오프라인 지원**: 서비스 워커를 통한 기본 기능 제공
- **홈 화면 추가**: 네이티브 앱과 같은 경험
- **백그라운드 음악 재생**: Media Session API 활용
- **푸시 알림**: 날씨 변화 및 음악 정보

## 🎯 사용법

1. **위치 권한 허용**: 앱 첫 실행 시 위치 접근 권한을 허용하세요
2. **자동 음악 재생**: 현재 날씨에 맞는 음악이 자동으로 시작됩니다
3. **키보드 조작**: H키를 눌러 단축키 도움말을 확인하세요
4. **배경 변경**: 스페이스바로 다양한 배경을 즐겨보세요

## 🔧 개발 모드

### 핫 리로드
```bash
npm run dev
```

### 타입 체크
```bash
npm run type-check
```

### 데이터베이스 스키마 생성
```bash
npm run db:generate
```

### 프로덕션 빌드
```bash
npm run build
npm start
```

## 🐛 문제 해결

### 흰색 화면이 나타날 때
- 브라우저 콘솔에서 JavaScript 오류 확인
- API 키가 올바르게 설정되었는지 확인
- 네트워크 연결 상태 점검

### 음악이 재생되지 않을 때
- 브라우저에서 자동재생 정책 확인
- 사용자 상호작용 후 재생 시도
- YouTube API 연결 상태 확인

### 날씨 정보가 로드되지 않을 때
- 위치 권한 허용 여부 확인
- OpenWeatherMap API 키 유효성 검증
- 네트워크 연결 상태 점검

## 📈 성능 최적화

- **이미지 레이지 로딩**: 배경 이미지 최적화
- **API 호출 최소화**: 5분 간격 날씨 갱신
- **메모리 관리**: 불필요한 리소스 정리
- **번들 크기 최적화**: Tree shaking 및 코드 분할

## 🔮 향후 계획

- [ ] 사용자 맞춤 플레이리스트 저장
- [ ] 소셜 미디어 음악 공유
- [ ] 음악 추천 알고리즘 개선
- [ ] 다국어 지원 확장
- [ ] 음성 명령 제어
- [ ] 스마트워치 연동

## 📄 라이선스

이 프로젝트는 MIT 라이선스 하에 배포됩니다.

## 🤝 기여하기

버그 리포트, 기능 제안, 풀 리퀘스트를 언제든 환영합니다!

---

**즐거운 음악 감상 되세요! 🎵**